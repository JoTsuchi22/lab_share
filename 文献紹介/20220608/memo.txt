文献調査 日本語訳

設計特徴量のセグメンテーション・マッピング・マージング メカニズムによるIGA対応ボリュームパラメトリックモデルの構築

1. はじめに 
パラメトリック設計は、B-rep や CSG などの境界で表現されるパラメトリックモデルに基づ いて行われる。を用いたパラメトリック設計は，多くのCADソフトウエアの中核をなす技術である．を用いたパラメトリック設計は，多くのCADソフトウエアのコア技術となっている．再利用が可能であるため[1-3]．しかし、パラメトリック しかし，解析や最適化に対応するためには，パラメトリックモデルをノンパラメトリックメッシュモデルに変換することが必要である．解析や最適化に適応させる必要があります。そのため、設計の全工程において パラメトリックモデルとノンパラメトリックモデルを相互に変換する必要があります。の変換を繰り返す必要があり、多くの時間を要します。一方、幾何学的パラメータと材料パラメータの間に直接的な解析的関係を確立することは困難です。一方、幾何学的パラメータ、材料パラメータ、性能パラメータ間の を直接的に解析することは困難であり、モデリング、解析、最適化の統合は モデリング、解析、最適化の統合は大きな課題となっています。

モデリング，シミュレーション，最適化間のモデル変換の難しさを克服するために，様々な手法が開発されている．その中で、ボリュームパラメトリックモデルに基づく IGA 手法は、CAD と CAE のシームレスな統合を実現することができる[4]。スプライン基底のテンソル特性により、トポロジーが四辺形または六面体でない領域は、単一のスプライン曲面またはボリュームで表現することができない[5]。したがって、IGAに適したモデルは、2次元では四辺形サーフェスの集合として、3次元では六面体ボリュームとしてボリュームパラメータ化されなければならない。しかし、多くのCADソフトで設計された幾何学モデルは、境界表現に基づいているため、これらのモデルはIGAの要件を満たしていない。

また、IGAに適したモデルを構築するための利用可能なソフトウェアがないことも大きな課題である。既存の文献では、上記の問題を解決するために2つの方法があります。1つ目は、Abaqusのような既存の商用有限要素ソフトウェアとCADを統合する方法[6-8]で、成熟した商用プラットフォームの助けを借りて、設計と解析の間のギャップを埋めようとしています。もう一つは、オープンなソフトウェアパッケージ[9,10]を開発し、与えられた境界によってポリキューブベースのメッシュを生成し、IGAの利用を大幅に促進することである。

本論文では，デザインフィーチャーの Segmentation- Mapping-Merging と呼ばれる機構に基づき，複雑なボリュームパラメトリックモデルを構築する手法を提案する．本手法は、デザインフィーチャーの構築とセグメンテーション、ボリュームパラメトリックマッピング、パラメトリックパッチのマージの3つのステップから構成されている。幾何学的な柔軟性を持たせるために、意味的特徴ネットワークは対話的な入力によって構築することができる。次に、意味的特徴ネットワークは、ボリュームパラメトリックモデリングの制約のもとで、複数の単純なサブネットワークに分割される。次に、ボリュームパラメトリックマッピングにより、各サブネットワークがボリュームパラメトリックパッチとして構築される。最後に、IGAの制約のもと、最適化およびマージ操作により、ボリュームパラメトリックモデルを得る。機械部品や自由形状を含む複雑なモデルを選び、本手法のテストと検証を行った。ここに、その貢献が結ばれる。

・体積パラメトリック設計に基づく統合設計のプラットフォームが提唱されている。現在のCADやCAEソフトで広く使われているパラメトリック設計やフィーチャー設計の考え方や手法も一緒に統合しています。
・ボリュームパラメトリックパッチ（プリミティブ）に対するセグメンテーション・マッピング・マージと呼ばれるモデリング機構・操作を研究している。この機構に基づき、境界面で表現されたモデルから変換することなく、IGAに適したモデルを直接作成することができる。
・提案手法を複雑な3次元機械部品や自由形状モデルに対して実現し、検証した。これにより、複雑な形状に対する体積パラメタリゼーションやIGAへの幅広い応用が期待される。

2. 関連作品と概要
CAD と CAE のシームレスな統合は、今日の製品設計における ボトルネックとなる問題であり、多くの研究者の関心を集めてい る。この問題を解決するために、Gujarathi [11]は CAD と CAE をデータから接続するために、モデリングと解析に必要なすべてのパラメータ情報を含む ''Common Data Model'' という概念を提唱している。Wassermann [12]と Schillinger [13]は、適応的なアイソジオメトリック解析と没入境界解析の基礎としてNURBSの階層的な洗練を探求した''DESIGN-THROUGH-ANALYSIS''という方法を提唱した。Cohen [14]は、解析に適したCADモデルを直接構築する解析対応モデリングを提案し、モデルの品質とIGAの結果の精度を向上させた。また，解析指向のモデリング手法を用い て，モデルを自動的に作成または変換する作品もある．Li [15]は，メッシュの複雑さを軽減し，メッシュ品質を向上させるため，一部のフィーチャーを削除してモデルを自動的に簡略化したが，六面体メッシュを自動的に生成することは困難であった．

また、八面体ベースの全六面体メッシュ生成や六面体メッシュ生成のための画像ベース等値化法[20]を動機とした有限セル法（FCM）[16-19]という手法もある。この方法は、B-rep モデル [21]、異種材料からなる複合領域 [22]、微細構造材料 [23] に適しており、さらには体積データ [24] にも利用されています。解析モデルの境界は、クワッドツリー（2D）およびオクトリー（3D）データ構造に配置された適応的なボクセルによって近似されます。

解析に適したモデルを構築する手法の中で，ボリュームパラメトリックモデリング法が注目されている[25]．この手法は，モデルをパラメトリックボリュームに変換する際に，良好な滑らかさを提供し，より少ないストレージスペースで，FEMの離散メッシュに存在する''接着''や''階段''の問題を回避するなどの多くの利点を有している．パラメトリックボリュームに基づき、IGA法がモデルに直接適用されます。他の手法と比較して、IGAは製品設計に適用する際に多くの利点があり、2005年にT. J. R. Hughesによって初めて提案されて以来、多くの研究関心を集めており[26]、NURBSベースのIGAは重要な分岐点となっています[27]。

現在のボリュームパラメトリックモデリングに関する研究は，主にいくつかの重要な側面に焦点を当てている．第一に、Bspline、NURBS（non-uniform rational B-spline）[28]、T-splines[29]、PHT splines [30]などの異なるスプライン基底を用いて、どのようにパラメトリックボリュームを表現するのかということです。2つ目は、点群モデル、ポリゴンメッシュモデル、STEPやIGESなどの標準CADフォーマットによるモデル、FEMメッシュモデルなどの境界表現モデルから、IGAに適したパラメトリックボリュームを構築する方法[31,32]である。第三に、アイソパラメトリック直交最適化[33]、調和関数[34]、ヤコビアン最適化[35]、カーブドリフト[36]など、解析結果に与える影響や効率の異なる最適化手法を使い分け、いかにパラメータ化品質を向上させるかということである。

ボリュームパラメトリックモデルを構築する方法は2つ存在する。一つは、与えられたモデルからモデルを構築するものである。しかし，これらの方法では，複雑なモデルのトポロジカルなセグメンテーションがボトルネックとなる問題である[37-39]．Xiao [40]は，2次元の複雑なパラメトリックモデルを構築する際に，多角形構造を用いている．また，Liu [41]は，モデルのスケルトン曲線を用いて，モデル内部にポリキューブ構造を生成し，ポリキューブとモデル表面とのマッピングにより，ボリュームパラメトリックパッチを生成した．また，Fu [42]は，四面体メッシュモデルのセグメンテーションとマッピングにより，ポリキューブ構造を構築した．Hu [43]は，gCVT を用いた 2 段階の表面セグメンテーション アルゴリズムを提案し，ポリキューブマッピングによって， 六面体と T スプラインのモデルを得た．Chen [44]は，入力された三角メッシュモデル上の法線のl1-ノルムを最小化することによりポリキューブ構造を生成し，内部特異点のない複雑な形状に対するパラメトリックボリュームを得た．しかし，再構築のアプローチにおいて，機械部品などのボリュームパラメトリックモデルを作成することは，まだ困難である[45]．

ボリュームパラメトリックモデルを作成・生成するもう一つの方法は，インタラクティブなパラメトリック構築法を用いる方法である．これに着目した研究として，パラメトリック設計法 [46]，パラメトリックモデルのブーリアン演算法 [47]，モデリングソフトを用いたモデリング法などがある．これらの手法は，インタラクティブな描画やフィーチャモデリング の手法を用いて，新たなボリュームパラメトリックモデルを作成しよ うとするものである．

本論文では，セグメンテーション-マッピング-マージのメカニズムに基づき，特徴量設計とパラメトリック設計を融合したボリュームパラメトリックモデルの構築手法を提案する．本手法は、特徴ネットワークの構築とセグメンテーション、ボリュームパラメトリックマッピング、パッチのマージを含む。モデリングプロセスを図1、図2に示す。

3. 意味的特徴ネットワークの基本定義と生成
特徴ネットワークの入力は、モデルのトポロジー構造と形状を記述する様々なサイズパラメータのセットである。これらは対話的な入力から変換されるか、既存のモデルから抽出される。

3.1. 基本的な定義
設計特徴とは、サイズ、形状、トポロジーの側面において、幾何学の大局的および局所的な詳細を記述するための一種の意味的情報である。以下は関連する定義である。

・特徴点 Fp: 特徴曲線や特徴面といった特別な意味を持つ場所を表す点。
・特徴曲線 Fc: 閉じた、または開いた曲線で、特徴面の境界や生成経路を表現する。フィーチャーサーフェスの境界やモデルの生成経路を表現する閉曲線または開曲線 モデルである。
・特徴面Fs：特殊な意味を持つ領域を表現するための閉じたN辺の曲面。
・フィーチャーノードBn：複数のパスの交点。
・パスL：図形の移動方向を記述するためのフィーチャー曲線。それを編集するためのアンカーとして、始点と終点の制御点が定義されている。
・断面S：体積補間法によってパラメトリックボリュームを得ることができる6つの境界面のうちの1つ。
・特徴ネットワーク F : モデルの主要なトポロジー、形状、サイズを記述 するためにあらかじめ定義された特徴によって構成されるネットワー ク。意味的特徴ネットワーク Sem_F、幾何学的特徴ネットワーク Geo_F 、完全特徴ネットワーク Comp_F と呼ばれる3つのグループに分類される。前者は、特徴点、曲線、曲面から構成される。第 2 は、特徴点、パス、断面から構成される。3 番目は、パラメトリックボリュームを補間することができる 6 つの囲まれた断面面を示す。

3.2. 意味特徴ネットワークの生成
意味的特徴ネットワーク構築の目的は、特徴をパラメータ化し、モデルの階層的な制御を確立することである。特徴点である曲面、曲線、点には意味情報が多く含まれ、モデル化には適さないため、入力サイズパラメータを用いてこれらの特徴を表現し、修正を容易にするために多層にマッピングしている。

・高レベルのセマンティック層Fhは、長方形の長さと幅、円弧の半径など、ジオメトリの全体的なサイズ、形状、トポロジーを記述するために、できるだけ少ないパラメータを使用する。高レベルのレイヤーは、ユーザーがモデルの全体的なサイズを変更するために公開されている。
・中間レベルの意味層Fmは、始点から曲線の変曲点までの距離など、比較的多くのパラメータを用いて形状を表現する。中間レベル層はカプセル化されている。
・低レベルの意味層Flは、曲面上の角点や曲線上の極値点など、曲面や曲線の基礎となる幾何情報を記述する。パラメータの冗長性を避けるため、曲線や曲面の制御点以外の特徴点を基礎パラメータとする。

上記の定義によれば、意味的特徴ネットワークは次のように書くことができる。
Sem_F = {Fs, Fc, Fp} = {Fh, Fm, Fl}

Fh, Fm, Fl上にそれぞれ{Ph,i, i∈ [1, H]}, {Pm,j, j∈ [1, M]}, {Pl,k, k∈ [1, N]} という三つのパラメータ集合が定義されている。また、これらのパラメータ間で2つの写像演算が定義されている。Φ1＝｛Fhmij｝は、Ph,iからPm,jへの写像である。項目Fhmijは、Ph,iのi番目のパラメータが、Pm,jのj番目のパラメータにどのように寄与するかを提示する。Φ2＝｛Fmljk｝は、PmからPlへの写像である。項目｛Fmljk｝は、Pm,jのj番目のパラメータがPl,kのk番目のパラメータにどのように貢献するかを示すものである。

また、マッピングには、多層に配置されたパラメータ間の制約も反映される。モデリングプロセスでは、マッピング操作を確立することで、高レベルのパラメータから低レベルのパラメータへのマッピングを実現することができる。その結果、ユーザーは少数の高レベルパラメータや設計パラメータで局所的な機能を作成・変更することができ、便利である。

4. 幾何学的特徴ネットワークの生成とセグメンテーション
幾何学的特徴ネットワークは、意味的特徴ネットワークから抽出することができる。抽出の際、一部の特徴曲線はパスとして扱われ、パスの交点は特徴ノードとして扱われる。また、閉じていない特徴面は断面として選択される。これらすべてのケースを考慮すると、幾何学的特徴ネットワークは4つのタイプに分類される。

・タイプIは、複数の断面積を持ち、ゼロパスである。
・タイプIIは、1つのセクションの表面と1つのパスを持つ。
・タイプIIIでは、複数のセクション面と単一のパスを持つ。
・タイプIVでは、複数のセクション面を持ち、複数のパスを持つ。

より困難なケースは、後者の 2 つのタイプで発生する。この二つの場合、幾何学的特徴ネットワークは一連の操作によって分割され、最終的にすべての幾何学的特徴ネットワークはタイプ I とタイプ II に分類されることになる。タイプ I の場合、既存の断面から直接いくつかの断面 を追加し、5.2 節で示した方法でパラメトリックボリュームを補 間すれば、完全な特徴ネットワークを容易に生成することができ るだろう。タイプ II の場合、パラメトリックパッチは、5.1 節の直接モデリングによって 得ることになる。

4.1. 交差するパスの切断
最終的に完成するフィーチャーネットワークにはパスは存在しないので、すべてのパスはセクションサーフェスの作成に役立つように処理される必要がある。そこで、タイプ III では、1 つのパスが複数の断面サーフェスに関 連している場合、そのパスを切断する。図 3(a)のように、1つのパスに2つの断面が関係するため、図 3(b)のように上下に2分割されたモデルとなる。指示された点Jnで、図3(c)に示すように、パスが切断される。そして、破断したパスを用いて、押し出し体積を作成する。

4.2. 特徴ノードの分解
タイプIVでは、いくつかのパスが1つの特徴ノードに収束する。このような場合 この場合、パスが分離されるように、特徴ノードで特徴ネットワークを分割し を分割し、各区画面を対応するパスに割り当てる。を対応するパスに割り当てる。このようにすると タイプ IV の特徴ネットワークは、タイプ III に変換される。図4(a)に示すように 図 4(a)に示すように、1 つの特徴ノード Bn のみからなる幾何学的特徴 ネットワーク F Bn は、以下のようになる。は次のように表現される。

Geo_F Bn = {S1, S2, . . . , Sm, L1, L2, . . . , Lm, Bn}

ここで、Si, i ∈ {0,m} は断面、Lj, j ∈ {0,n} はパスであり、m と n はそれぞれ断面、パスの数である。図4（b）に示すように、各部分が最大1つのパスを含むように、交差するパスは特徴ノードBnで分離する必要がある。また、分割された部品を囲むように、いくつかの面Si を追加挿入する必要がある。

交差するパスを分割するために、パスを考慮した六面体ブロック法[48]と呼ばれる手法が拡張される。モデリングの便宜のため、図5に示すように、各表面の交差するパスの方向と数に応じてこのブロックを細分化し、各表面を入射パスの方向に対して可能な限り直交するようにする。直感的に理解できるように、六面体ブロックを通る経路を入射曲線と名付ける。各Bnについて、以下の最適化問題を解く必要がある。

式(2)

ここで、UVWは正規直交基底、djはj番目の入射曲線の方向である。他の線形最適化問題と異なり、式（2）は直交基底UVWの絶対値および2次制約を含む。

式

簡単のために、[49]で紹介されたl1ノルムの滑らかな近似を採用し、この方法で、l1最小化は滑らかな最適化問題に変わる。要素｜x｜は√ x2 + εで置き換えられ、ε > 0 は正則化パラメータで、最小化を通じて徐々に減少させ、滑らかさと正確さのバランスをとる。この方法の具体的な数学的証明は、[50,51]に記載されている。そこで、式（2）を式（3）に置き換えると、式（3）はε＞0と0に近づきながら最小化される。

式(3)

この最小化は、非線形制約問題として考えられている。基底UVWは、方向の集合｛d1, d2, . , dk}のPCAを計算することによって初期化される。問題は経験的な値ε = 0.2で解決され始める。各解は、εの値を半分にすることで次の反復のためのウォームスタートとされる。実験的には、最適化プロセスを終了するには5回の反復が良いだろう。最適化解が得られると、各入射曲線に対応した向きの六面体ボックスの集合が得られる。しかし、1つの面に複数の入射路がある場合は、ボックスを再度分割する必要がある。この面f上のすべての交点とその数nが計算される必要がある。副矩形の方向は，交点をfの辺に平行な2つの基線方向に投影することによって決定される．最後に、fの各面が対応するパスに割り当てられる。その結果をFig.6に示す。

フィーチャーネットワークF Bnは今
Geo_F Bn = {S1, S2, . . . , Sm, L1, L2, . . . , Lk, S1, S2, . . . , Sl}

ここで、kはブロック全体のパスの数であり、m以上である。Siは六面体の箱の境界面である。SiとSiの距離が近いことを考慮すると、両者の間のパスLiは直線とみなすことができる。ここまでは, 交差する経路をBnで切断し, 5.2.3節で六面体ボックスを適用する.

4.3. 断面積の四角形分割
一般的なケースでは、IGAは、ボリュームパラメトリックパッチが六面体であり、全く同じ隣接四角形表面を共有することが必要である。幾何学的特徴ネットワーク Geo_F = {S1, S2, .... Sm, L1, L2, .... Ln}の場合、これらのセクション面はすべて四角形パッチであり、属 性を持たないはずである。そこで、タイプIIIとタイプIVの断面形状を扱うために、四角形パッチを得るための四角形セグメンテーション法を提案し、隣接する断面が1つの一貫した境界曲線を持つことを確認する。

四角形分割の入力は、図 7(a)に示すような、外郭と内郭の両方を持つ断面面の輪郭である。本手法では、いくつかの曲線特徴に基づき、断面面の輪郭をセグメンテーションすることで、断面面を四角形化する。図7（b）に示すように、木のノードとみなされる輪郭間の包含 関係の階層を表現するために、幾何学的な包含木を構築する。ルートノードは最初の外側の輪郭であり、その子 は内側の輪郭である。奇数層と偶数層が外側輪郭と内側輪郭に対応する。各2層の内輪郭と外輪郭によって連結領域が形成される。外側の輪郭だけを持ち、内側の輪郭を持たない連結領域も存在する。

すべての輪郭がセグメンテーションされるため、リーフノードの輪郭から順にレイヤーごとにセグメンテーション操作を行う。多属性の連結領域は、ガイドラインとしていくつかの切断線を追加することで、ゼロ属性の領域に変換する必要がある。セグメンテーションのための前処理として、重み付け法を用いて切断線を選択する。まず、幾何学的な含有木を階層的にトラバースする。次に、異なる幾何学的領域の既存の曲線の端点間に、切断線として直線を追加する。等値性解析における四辺形パッチの品質を考慮し、各実行可能な切断線の重みを計算し、最適な切断線を選択する。

文献[34]から，隣接するエッジ間の角度がパッチの品質に大きく影響することがわかる。そして，凹んだ点が優先的に接続されるので，各切断線の重みは次のようになる。

式たくさん

ここで、iとjは2つの端点のインデックスである。その他のパラメータは図8に示すとおりである。θが大きすぎたり小さすぎたりすると，重みが小さくなり，鋭角にならないようにする。輪郭が曲線の場合は，その接線方向から角度を計算する。重みが大きければ大きいほど，切断線は条件を満たすことになる．最後に、重みに応じて切断線を選択する。切断線が得られたら、四角形分割を行うことができる。δは、輪郭が分割可能かどうかを表すために定義される。δが0であれば，その曲線は細分化できないことを意味する．輪郭を処理する前に，輪郭が内輪郭であればδは0，そうでなければ1である．凸の四辺形の輪郭に対しては，δは0に修正され，集合Qに格納される．











